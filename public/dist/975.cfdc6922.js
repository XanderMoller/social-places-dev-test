"use strict";((self||this).webpackChunk=(self||this).webpackChunk||[]).push([[975,868],{5975:(e,t,i)=>{i.r(t),i.d(t,{default:()=>R});var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.label?i("span",{class:this.labelClass,style:this.internalLabelStyle},[e._v(e._s(e.label))]):e._e(),e._v(" "),i("vue-file-agent",{ref:"uploader",staticClass:"vue-file-agent",staticStyle:{position:"relative"},attrs:{accept:e.accept,disabled:e.disabled||e.loading,"max-size":e.maxSize,multiple:e.multiple,theme:"list"},on:{select:e.onFileSelected,"upload:error":e.onUploadError},scopedSlots:e._u([{key:"before-outer",fn:function(){return[e._t("default")]},proxy:!0},{key:"file-preview",fn:function(t){var r=t.fileRecord,l=t.index;return[i("upload-item",{attrs:{"disable-move":!e.sortable,"file-record":r,"include-other-name":e.alternativeFileNames,index:l,"number-of-files":e.numberOfFiles,selected:!!e.multiple&&l===e.selectedIndex,"show-preview":e.showPreviews},on:{"move:file:up":function(t){return e.moveFile(t,t-1)},"move:file:down":function(t){return e.moveFile(t,t+1)},"remove:file":e.removeFile,"preview:file":e.previewFile}})]}},{key:"after-outer",fn:function(){return[i("div",[i("div",{staticClass:"drop-help-text"},[e._t("after-outer-drop-help-text",(function(){return[i("p",[e._v("Drop here")])]}))],2)])]},proxy:!0},{key:"file-preview-new",fn:function(){return[i("v-card",{key:"new",attrs:{elevation:"0"},on:{click:e.selectFiles}},[i("v-card-subtitle",[e._t("file-preview-new-subtitle")],2),e._v(" "),i("v-card-text",{style:{color:e.uploadError?"var(--v-error-base)":null,"text-align":"center"}},[e._t("file-preview-new-icon",(function(){return[i("v-icon",{attrs:{color:e.uploadError?"error":null,size:"60px"}},[e._v("fas fa-cloud-upload-alt")])]}),{uploadError:e.uploadError}),e._v(" "),i("br"),e._v(" "),e._t("file-preview-new-upload-text"),e._v(" "),e.uploadError?i("div",{domProps:{innerHTML:e._s(e.uploadError)}}):e._e()],2)],1)]},proxy:!0}],null,!0),model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)};r._withStripped=!0;i(7042),i(1038),i(8783),i(2526),i(1817),i(2165),i(6992),i(3948),i(5003),i(9554),i(4747),i(9337),i(3321),i(9070);var l=i(4942),n=i(1002),o=i(5861),a=i(7757),s=i.n(a),d=(i(9653),i(4916),i(3123),i(5306),i(1058),i(9753),i(4678),i(561),i(8309),i(5212),i(1539),i(7941),i(7327),i(2222),i(2772),i(4723),i(144)),c=i(8276),u=i.n(c),f=i(4868),p=i(3248);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){(0,l.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function m(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw n}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}d.default.use(u());const g={name:"MediaUploader",components:{UploadItem:f.default},props:{value:{required:!0,type:Array|Object},multiple:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},accept:{type:String,default:""},alternativeFileNames:{type:Boolean,default:!1},folder:{type:null|String,default:void 0},showPreviews:{type:Boolean,default:!1},platform:{type:String|Number,default:null},contentType:{type:String|Number,default:null},mediaType:{type:String|Number,default:null},maxSize:{type:String,default:null},minDimension:{type:String,default:null},maxDimension:{type:String,default:null},aspectRatio:{type:String,default:null},minSize:{type:String,default:null},noMedia:{type:Boolean,default:!1},label:{type:String},labelClass:{type:String},labelStyle:{type:Object,default:function(){}},uploadFolderUrl:{type:null|String,required:!0},uploadUrl:{type:String}},created:function(){var e=this;return(0,o.Z)(s().mark((function t(){var i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.folder){t.next=8;break}return e.loading=!0,t.next=4,p.Z.get(e.uploadFolderUrl);case 4:i=t.sent,r=i.data.folder,e.uploadFolder=r,e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},data:function(){var e;return{loading:!1,uploadFolder:null!==(e=this.folder)&&void 0!==e?e:null,uploadError:null,selectedIndex:null,files:this.value,fileRecordsForUpload:[]}},watch:{folder:function(){this.uploadFolder=this.folder,this.loading=!1},uploadFolder:function(){this.$emit("uploadFolder",this.uploadFolder)},value:function(e){this.files=e}},computed:{numberOfFiles:function(){return this.multiple?this.files.length:1},uploadHeaders:function(){var e={};return this.platform&&(e["X-Platform"]=this.platform),this.contentType&&(e["X-Content-Type"]=this.contentType),this.mediaType&&(e["X-Media-Type"]=this.mediaType),e["X-Folder"]=this.uploadFolder,e},internalMinDimension:function(){return this.convertDimension(this.minDimension)},internalMaxDimension:function(){return this.convertDimension(this.maxDimension)},internalAspectRatio:function(){return this.calculateAspectRatio(this.aspectRatio,":")},internalMinSize:function(){return this.minSize?this.getSizeParsed(this.minSize):null},internalLabelStyle:function(){return this.labelStyle?this.labelStyle:{color:this.$vuetify.theme.dark?"#FFFFFF99":"#00000099","font-size":"12px","margin-left":"8px"}}},methods:{convertDimension:function(e){if(!e)return null;var t=e.toLowerCase().replace(/px/g,"").split("x");return t.length>1?{width:parseInt(t[0]),height:parseInt(t[1])}:{width:parseInt(t[0]),height:parseInt(t[0])}},calculateAspectRatio:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";if(!e)return null;var i=[];return"object"!==(0,n.Z)(e)||Array.isArray(e)?"string"==typeof e&&(i=e.split(t)):i=[e.width,e.height],1===i.length?parseFloat(i[0]):parseFloat(i[0])/parseFloat(i[1])},selectFiles:function(){this.$emit("upload:select"),this.$refs.uploader.$refs.fileInput.click()},removeFile:function(e){this.$emit("file:delete",e),this.multiple?this.files.splice(e,1):this.files=null,this.selectedIndex===e&&(this.selectedIndex=null),this.$emit("input",this.files)},previewFile:function(e){var t=e.src,i=e.isImage,r=e.index;this.$emit("file:preview",{src:t,isImage:i,index:r}),this.selectedIndex=r},moveFile:function(e,t){if(this.$emit("file:move",{index:e,toIndex:t}),!(t<0||t>this.files.length-1)){var i=this.files[e];this.files.splice(e,1),this.files.splice(t,0,i),this.selectedIndex===e&&(this.selectedIndex=t),this.$emit("input",this.files)}},uploadFiles:function(){var e=this;0!==this.fileRecordsForUpload.length&&this.$refs.uploader.upload(this.uploadUrl,this.uploadHeaders,this.fileRecordsForUpload).then((function(t){var i,r=0,l=m(e.fileRecordsForUpload);try{for(l.s();!(i=l.n()).done;){i.value.tempSrc=t[r++].data.uploadedFiles[0].tempName}}catch(e){l.e(e)}finally{l.f()}e.fileRecordsForUpload=[];var n,o=[],a=m(e.$refs.uploader.fileRecords);try{for(a.s();!(n=a.n()).done;){var s,d,c,u=n.value;o.push(v(v({},u),{},{tempSrc:null==u||null===(s=u.raw)||void 0===s?void 0:s.tempSrc,url:null!==(d=null==u?void 0:u.urlValue)&&void 0!==d?d:"",mimeType:null==u||null===(c=u.raw)||void 0===c?void 0:c.type,originalFileName:u.name()}))}}catch(e){a.e(e)}finally{a.f()}e.$emit("upload:inProgress",!1),e.$emit("upload:complete"),e.$emit("input",o)}))},onFileSelected:function(e){var t=this,i=function(e){if(e.hasOwnProperty("dimensions")){if(null!==t.internalMinDimension&&(t.internalMinDimension.width>e.dimensions.width||t.internalMinDimension.height>e.dimensions.height))return!1;if(null!==t.internalMaxDimension&&(t.internalMaxDimension.width<e.dimensions.width||t.internalMaxDimension.height<e.dimensions.height))return!1;if(null!==t.internalAspectRatio){t.internalAspectRatio;var i=t.calculateAspectRatio(e.dimensions);Math.abs(t.internalAspectRatio-i)}}return!(t.internalMinSize>e.size)&&(!e.error||!Object.keys(e.error).some((function(t){return!0===e.error[t]})))},r=e.filter(i);this.fileRecordsForUpload=this.fileRecordsForUpload.concat(r);var l=Math.abs(r.length-e.length);if(0!==l&&Array.isArray(this.files)&&(this.files=this.files.filter(i)),this.$emit("upload:inProgress",!0),r.length>0){var n=r[0];this.previewFile({src:null==n?void 0:n.src(),isImage:0===n.file.type.indexOf("image/"),index:0}),this.$emit("upload:valid-files",r),this.uploadFiles()}else this.$emit("upload:valid-files",null)},onUploadError:function(e){if(this.$emit("upload:inProgress",!1),this.$emit("upload:error",e),0!==e.length)e[0]},validate:function(){return!0},getSizeParsed:function(e){var t=(e=(""+e).toUpperCase()).match(/([\d|.]+?)\s*?([A-Z]+)/);if(!t)return parseFloat(e);var i=["B","KB","MB","GB","TB"].indexOf(t[2]);return-1===i?parseFloat(e):parseFloat(t[1])*Math.pow(1024,i)}}};var b=i(1900),w=i(3453),x=i.n(w),S=i(7318),F=i(5255),_=i(1836),O=(0,b.Z)(g,r,[],!1,null,"4fc7084e",null);x()(O,{VCard:S.Z,VCardSubtitle:F.Qq,VCardText:F.ZB,VIcon:_.Z}),O.options.__file="assets/js/components/general/Uploader/MediaUploader.vue";const R=O.exports},4868:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"mb-2 elevation-changes",attrs:{elevation:e.flat?0:e.selected?10:2}},[i("v-card-text",{staticStyle:{display:"flex",width:"100%"}},[i("div",{staticClass:"mr-3",staticStyle:{"max-width":"86px",height:"62px",cursor:"pointer"}},[i("div",{staticClass:"d-flex icon-holder",style:{background:e.fileRecord.icon().color}},[i("v-scale-transition",{attrs:{origin:"center"}},[0!==e.fileRecord.progressInternal&&100!==e.fileRecord.progressInternal?i("div",{staticClass:"loading-holder"},[i("v-progress-circular",{attrs:{color:"white",size:"40"},model:{value:e.fileRecord.progressInternal,callback:function(t){e.$set(e.fileRecord,"progressInternal",t)},expression:"fileRecord.progressInternal"}})],1):e._e()]),e._v(" "),e.showPreview&&e.isImage?e._e():i("svg",{staticStyle:{width:"45px",fill:"white"},attrs:{viewBox:"0 0 100 100"}},[e._l(e.fileRecord.icon().paths,(function(t,r){return[t?i("path",{key:r,attrs:{d:t}}):e._e()]}))],2),e._v(" "),e.showPreview&&e.isImage?i("v-img",{attrs:{src:e.fileRecord.src(),width:"45px"}}):e._e()],1)]),e._v(" "),i("div",{staticClass:"d-flex",staticStyle:{"flex-direction":"column",width:"100%"},style:{"justify-content":e.includeOtherName?"":"center"}},[i("span",{staticStyle:{"text-align":"left","word-break":"break-word"}},[e._v(e._s(e.fileRecord.name()))]),e._v(" "),e.includeOtherName?i("v-text-field",{staticClass:"mt-4",attrs:{label:"File "+(e.index+1)+" Name",placeholder:e.fileRecord.name().replace("."+e.fileRecord.ext(),"").toLowerCase().ucwords(),color:"primary",dense:"","hide-details":"","persistent-placeholder":""},model:{value:e.fileRecord.raw.otherName,callback:function(t){e.$set(e.fileRecord.raw,"otherName",t)},expression:"fileRecord.raw.otherName"}}):e._e()],1),e._v(" "),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:e.disableMove?12:6}}),e._v(" "),e.disableMove?e._e():i("v-col",{attrs:{cols:"6"}},[i("v-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{disabled:0===e.index,color:"accent",icon:"",tile:"","x-small":""},on:{click:function(t){return e.$emit("move:file:up",e.index)}}},[i("v-icon",[e._v("fas fa-chevron-up")])],1)],1),e._v(" "),i("v-col",{attrs:{cols:e.disableMove?12:6}},[i("v-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{color:"error",icon:"",tile:"","x-small":""},on:{click:function(t){return e.$emit("remove:file",e.index)}}},[i("v-icon",[e._v("fas fa-trash")])],1)],1),e._v(" "),e.disableMove?e._e():i("v-col",{attrs:{cols:"6"}},[i("v-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{disabled:e.numberOfFiles-1===e.index,color:"accent",icon:"",tile:"","x-small":""},on:{click:function(t){return e.$emit("move:file:down",e.index)}}},[i("v-icon",[e._v("fas fa-chevron-down")])],1)],1)],1)],1)],1)};r._withStripped=!0;i(9653),i(2772),i(3248);const l={name:"UploadItem",props:{index:{type:Number,required:!0},selected:{type:Boolean,default:!1},numberOfFiles:{type:Number,required:!0},fileRecord:{type:Object,validator:function(e){return e.hasOwnProperties(["raw","file"])}},disableMove:{type:Boolean,default:!1},includeOtherName:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!1}},data:function(){return{isDownloading:!1}},computed:{isImage:function(){var e,t,i;return 0===(null===(e=this.fileRecord)||void 0===e||null===(t=e.file)||void 0===t||null===(i=t.type)||void 0===i?void 0:i.indexOf("image/"))}}};var n=i(1900),o=i(3453),a=i.n(o),s=i(461),d=i(7318),c=i(5255),u=i(7024),f=i(1836),p=i(4564),h=i(4017),v=i(7894),m=i(7419),y=i(9856),g=(0,n.Z)(l,r,[],!1,null,"500d2e74",null);a()(g,{VBtn:s.Z,VCard:d.Z,VCardText:c.ZB,VCol:u.Z,VIcon:f.Z,VImg:p.Z,VProgressCircular:h.Z,VRow:v.Z,VScaleTransition:m.T0,VTextField:y.Z}),g.options.__file="assets/js/components/general/Uploader/components/UploadItem.vue";const b=g.exports}}]);