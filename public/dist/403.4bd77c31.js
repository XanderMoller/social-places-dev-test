"use strict";((self||this).webpackChunk=(self||this).webpackChunk||[]).push([[403,975,868],{5975:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.label?r("span",{class:this.labelClass,style:this.internalLabelStyle},[e._v(e._s(e.label))]):e._e(),e._v(" "),r("vue-file-agent",{ref:"uploader",staticClass:"vue-file-agent",staticStyle:{position:"relative"},attrs:{accept:e.accept,disabled:e.disabled||e.loading,"max-size":e.maxSize,multiple:e.multiple,theme:"list"},on:{select:e.onFileSelected,"upload:error":e.onUploadError},scopedSlots:e._u([{key:"before-outer",fn:function(){return[e._t("default")]},proxy:!0},{key:"file-preview",fn:function(t){var i=t.fileRecord,n=t.index;return[r("upload-item",{attrs:{"disable-move":!e.sortable,"file-record":i,"include-other-name":e.alternativeFileNames,index:n,"number-of-files":e.numberOfFiles,selected:!!e.multiple&&n===e.selectedIndex,"show-preview":e.showPreviews},on:{"move:file:up":function(t){return e.moveFile(t,t-1)},"move:file:down":function(t){return e.moveFile(t,t+1)},"remove:file":e.removeFile,"preview:file":e.previewFile}})]}},{key:"after-outer",fn:function(){return[r("div",[r("div",{staticClass:"drop-help-text"},[e._t("after-outer-drop-help-text",(function(){return[r("p",[e._v("Drop here")])]}))],2)])]},proxy:!0},{key:"file-preview-new",fn:function(){return[r("v-card",{key:"new",attrs:{elevation:"0"},on:{click:e.selectFiles}},[r("v-card-subtitle",[e._t("file-preview-new-subtitle")],2),e._v(" "),r("v-card-text",{style:{color:e.uploadError?"var(--v-error-base)":null,"text-align":"center"}},[e._t("file-preview-new-icon",(function(){return[r("v-icon",{attrs:{color:e.uploadError?"error":null,size:"60px"}},[e._v("fas fa-cloud-upload-alt")])]}),{uploadError:e.uploadError}),e._v(" "),r("br"),e._v(" "),e._t("file-preview-new-upload-text"),e._v(" "),e.uploadError?r("div",{domProps:{innerHTML:e._s(e.uploadError)}}):e._e()],2)],1)]},proxy:!0}],null,!0),model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)};i._withStripped=!0;r(7042),r(1038),r(8783),r(2526),r(1817),r(2165),r(6992),r(3948),r(5003),r(9554),r(4747),r(9337),r(3321),r(9070);var n=r(4942),l=r(1002),o=r(5861),a=r(7757),s=r.n(a),c=(r(9653),r(4916),r(3123),r(5306),r(1058),r(9753),r(4678),r(561),r(8309),r(5212),r(1539),r(7941),r(7327),r(2222),r(2772),r(4723),r(144)),d=r(8276),u=r.n(d),p=r(4868),f=r(3248);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,l=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw l}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}c.default.use(u());const g={name:"MediaUploader",components:{UploadItem:p.default},props:{value:{required:!0,type:Array|Object},multiple:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},accept:{type:String,default:""},alternativeFileNames:{type:Boolean,default:!1},folder:{type:null|String,default:void 0},showPreviews:{type:Boolean,default:!1},platform:{type:String|Number,default:null},contentType:{type:String|Number,default:null},mediaType:{type:String|Number,default:null},maxSize:{type:String,default:null},minDimension:{type:String,default:null},maxDimension:{type:String,default:null},aspectRatio:{type:String,default:null},minSize:{type:String,default:null},noMedia:{type:Boolean,default:!1},label:{type:String},labelClass:{type:String},labelStyle:{type:Object,default:function(){}},uploadFolderUrl:{type:null|String,required:!0},uploadUrl:{type:String}},created:function(){var e=this;return(0,o.Z)(s().mark((function t(){var r,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.folder){t.next=8;break}return e.loading=!0,t.next=4,f.Z.get(e.uploadFolderUrl);case 4:r=t.sent,i=r.data.folder,e.uploadFolder=i,e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},data:function(){var e;return{loading:!1,uploadFolder:null!==(e=this.folder)&&void 0!==e?e:null,uploadError:null,selectedIndex:null,files:this.value,fileRecordsForUpload:[]}},watch:{folder:function(){this.uploadFolder=this.folder,this.loading=!1},uploadFolder:function(){this.$emit("uploadFolder",this.uploadFolder)},value:function(e){this.files=e}},computed:{numberOfFiles:function(){return this.multiple?this.files.length:1},uploadHeaders:function(){var e={};return this.platform&&(e["X-Platform"]=this.platform),this.contentType&&(e["X-Content-Type"]=this.contentType),this.mediaType&&(e["X-Media-Type"]=this.mediaType),e["X-Folder"]=this.uploadFolder,e},internalMinDimension:function(){return this.convertDimension(this.minDimension)},internalMaxDimension:function(){return this.convertDimension(this.maxDimension)},internalAspectRatio:function(){return this.calculateAspectRatio(this.aspectRatio,":")},internalMinSize:function(){return this.minSize?this.getSizeParsed(this.minSize):null},internalLabelStyle:function(){return this.labelStyle?this.labelStyle:{color:this.$vuetify.theme.dark?"#FFFFFF99":"#00000099","font-size":"12px","margin-left":"8px"}}},methods:{convertDimension:function(e){if(!e)return null;var t=e.toLowerCase().replace(/px/g,"").split("x");return t.length>1?{width:parseInt(t[0]),height:parseInt(t[1])}:{width:parseInt(t[0]),height:parseInt(t[0])}},calculateAspectRatio:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";if(!e)return null;var r=[];return"object"!==(0,l.Z)(e)||Array.isArray(e)?"string"==typeof e&&(r=e.split(t)):r=[e.width,e.height],1===r.length?parseFloat(r[0]):parseFloat(r[0])/parseFloat(r[1])},selectFiles:function(){this.$emit("upload:select"),this.$refs.uploader.$refs.fileInput.click()},removeFile:function(e){this.$emit("file:delete",e),this.multiple?this.files.splice(e,1):this.files=null,this.selectedIndex===e&&(this.selectedIndex=null),this.$emit("input",this.files)},previewFile:function(e){var t=e.src,r=e.isImage,i=e.index;this.$emit("file:preview",{src:t,isImage:r,index:i}),this.selectedIndex=i},moveFile:function(e,t){if(this.$emit("file:move",{index:e,toIndex:t}),!(t<0||t>this.files.length-1)){var r=this.files[e];this.files.splice(e,1),this.files.splice(t,0,r),this.selectedIndex===e&&(this.selectedIndex=t),this.$emit("input",this.files)}},uploadFiles:function(){var e=this;0!==this.fileRecordsForUpload.length&&this.$refs.uploader.upload(this.uploadUrl,this.uploadHeaders,this.fileRecordsForUpload).then((function(t){var r,i=0,n=m(e.fileRecordsForUpload);try{for(n.s();!(r=n.n()).done;){r.value.tempSrc=t[i++].data.uploadedFiles[0].tempName}}catch(e){n.e(e)}finally{n.f()}e.fileRecordsForUpload=[];var l,o=[],a=m(e.$refs.uploader.fileRecords);try{for(a.s();!(l=a.n()).done;){var s,c,d,u=l.value;o.push(h(h({},u),{},{tempSrc:null==u||null===(s=u.raw)||void 0===s?void 0:s.tempSrc,url:null!==(c=null==u?void 0:u.urlValue)&&void 0!==c?c:"",mimeType:null==u||null===(d=u.raw)||void 0===d?void 0:d.type,originalFileName:u.name()}))}}catch(e){a.e(e)}finally{a.f()}e.$emit("upload:inProgress",!1),e.$emit("upload:complete"),e.$emit("input",o)}))},onFileSelected:function(e){var t=this,r=function(e){if(e.hasOwnProperty("dimensions")){if(null!==t.internalMinDimension&&(t.internalMinDimension.width>e.dimensions.width||t.internalMinDimension.height>e.dimensions.height))return!1;if(null!==t.internalMaxDimension&&(t.internalMaxDimension.width<e.dimensions.width||t.internalMaxDimension.height<e.dimensions.height))return!1;if(null!==t.internalAspectRatio){t.internalAspectRatio;var r=t.calculateAspectRatio(e.dimensions);Math.abs(t.internalAspectRatio-r)}}return!(t.internalMinSize>e.size)&&(!e.error||!Object.keys(e.error).some((function(t){return!0===e.error[t]})))},i=e.filter(r);this.fileRecordsForUpload=this.fileRecordsForUpload.concat(i);var n=Math.abs(i.length-e.length);if(0!==n&&Array.isArray(this.files)&&(this.files=this.files.filter(r)),this.$emit("upload:inProgress",!0),i.length>0){var l=i[0];this.previewFile({src:null==l?void 0:l.src(),isImage:0===l.file.type.indexOf("image/"),index:0}),this.$emit("upload:valid-files",i),this.uploadFiles()}else this.$emit("upload:valid-files",null)},onUploadError:function(e){if(this.$emit("upload:inProgress",!1),this.$emit("upload:error",e),0!==e.length)e[0]},validate:function(){return!0},getSizeParsed:function(e){var t=(e=(""+e).toUpperCase()).match(/([\d|.]+?)\s*?([A-Z]+)/);if(!t)return parseFloat(e);var r=["B","KB","MB","GB","TB"].indexOf(t[2]);return-1===r?parseFloat(e):parseFloat(t[1])*Math.pow(1024,r)}}};var w=r(1900),b=r(3453),x=r.n(b),_=r(7318),S=r(5255),F=r(1836),I=(0,w.Z)(g,i,[],!1,null,"4fc7084e",null);x()(I,{VCard:_.Z,VCardSubtitle:S.Qq,VCardText:S.ZB,VIcon:F.Z}),I.options.__file="assets/js/components/general/Uploader/MediaUploader.vue";const R=I.exports},4868:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mb-2 elevation-changes",attrs:{elevation:e.flat?0:e.selected?10:2}},[r("v-card-text",{staticStyle:{display:"flex",width:"100%"}},[r("div",{staticClass:"mr-3",staticStyle:{"max-width":"86px",height:"62px",cursor:"pointer"}},[r("div",{staticClass:"d-flex icon-holder",style:{background:e.fileRecord.icon().color}},[r("v-scale-transition",{attrs:{origin:"center"}},[0!==e.fileRecord.progressInternal&&100!==e.fileRecord.progressInternal?r("div",{staticClass:"loading-holder"},[r("v-progress-circular",{attrs:{color:"white",size:"40"},model:{value:e.fileRecord.progressInternal,callback:function(t){e.$set(e.fileRecord,"progressInternal",t)},expression:"fileRecord.progressInternal"}})],1):e._e()]),e._v(" "),e.showPreview&&e.isImage?e._e():r("svg",{staticStyle:{width:"45px",fill:"white"},attrs:{viewBox:"0 0 100 100"}},[e._l(e.fileRecord.icon().paths,(function(t,i){return[t?r("path",{key:i,attrs:{d:t}}):e._e()]}))],2),e._v(" "),e.showPreview&&e.isImage?r("v-img",{attrs:{src:e.fileRecord.src(),width:"45px"}}):e._e()],1)]),e._v(" "),r("div",{staticClass:"d-flex",staticStyle:{"flex-direction":"column",width:"100%"},style:{"justify-content":e.includeOtherName?"":"center"}},[r("span",{staticStyle:{"text-align":"left","word-break":"break-word"}},[e._v(e._s(e.fileRecord.name()))]),e._v(" "),e.includeOtherName?r("v-text-field",{staticClass:"mt-4",attrs:{label:"File "+(e.index+1)+" Name",placeholder:e.fileRecord.name().replace("."+e.fileRecord.ext(),"").toLowerCase().ucwords(),color:"primary",dense:"","hide-details":"","persistent-placeholder":""},model:{value:e.fileRecord.raw.otherName,callback:function(t){e.$set(e.fileRecord.raw,"otherName",t)},expression:"fileRecord.raw.otherName"}}):e._e()],1),e._v(" "),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:e.disableMove?12:6}}),e._v(" "),e.disableMove?e._e():r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{disabled:0===e.index,color:"accent",icon:"",tile:"","x-small":""},on:{click:function(t){return e.$emit("move:file:up",e.index)}}},[r("v-icon",[e._v("fas fa-chevron-up")])],1)],1),e._v(" "),r("v-col",{attrs:{cols:e.disableMove?12:6}},[r("v-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{color:"error",icon:"",tile:"","x-small":""},on:{click:function(t){return e.$emit("remove:file",e.index)}}},[r("v-icon",[e._v("fas fa-trash")])],1)],1),e._v(" "),e.disableMove?e._e():r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{disabled:e.numberOfFiles-1===e.index,color:"accent",icon:"",tile:"","x-small":""},on:{click:function(t){return e.$emit("move:file:down",e.index)}}},[r("v-icon",[e._v("fas fa-chevron-down")])],1)],1)],1)],1)],1)};i._withStripped=!0;r(9653),r(2772),r(3248);const n={name:"UploadItem",props:{index:{type:Number,required:!0},selected:{type:Boolean,default:!1},numberOfFiles:{type:Number,required:!0},fileRecord:{type:Object,validator:function(e){return e.hasOwnProperties(["raw","file"])}},disableMove:{type:Boolean,default:!1},includeOtherName:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!1}},data:function(){return{isDownloading:!1}},computed:{isImage:function(){var e,t,r;return 0===(null===(e=this.fileRecord)||void 0===e||null===(t=e.file)||void 0===t||null===(r=t.type)||void 0===r?void 0:r.indexOf("image/"))}}};var l=r(1900),o=r(3453),a=r.n(o),s=r(461),c=r(7318),d=r(5255),u=r(7024),p=r(1836),f=r(4564),v=r(4017),h=r(7894),m=r(7419),y=r(9856),g=(0,l.Z)(n,i,[],!1,null,"500d2e74",null);a()(g,{VBtn:s.Z,VCard:c.Z,VCardText:d.ZB,VCol:u.Z,VIcon:p.Z,VImg:f.Z,VProgressCircular:v.Z,VRow:h.Z,VScaleTransition:m.T0,VTextField:y.Z}),g.options.__file="assets/js/components/general/Uploader/components/UploadItem.vue";const w=g.exports},6403:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"8"}},[r("v-card",[r("v-card-title",[e._v("\n                    Import store information\n                ")]),e._v(" "),r("v-card-text",[r("media-uploader",{attrs:{accept:".xlsx","upload-folder-url":"api_stores_temporary_folder","upload-url":"/api/stores/import/upload"},on:{uploadFolder:function(t){e.folder=t}},scopedSlots:e._u([{key:"file-preview-new-upload-text",fn:function(){return[e._v("\n                            Click or drag to upload a new import\n                        ")]},proxy:!0}]),model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:e.processing,text:""},on:{click:function(t){return e.$router.push({name:"Stores Index"})}}},[e._v("Cancel\n                    ")]),e._v(" "),r("v-btn",{attrs:{loading:e.processing,color:"primary"},on:{click:e.process}},[e._v("Process\n                    ")])],1)],1)],1)],1)],1)};i._withStripped=!0;r(1539),r(8674),r(7727);var n=r(5975),l=r(3248);const o={name:"StoreImport",components:{MediaUploader:n.default},data:function(){return{files:[],processing:!1,folder:null}},methods:{process:function(){var e=this;this.processing=!0;var t=this.files[0];l.Z.processExportDownload("api_store_process_import",{folder:this.folder,fileName:t.tempSrc}).finally((function(){e.processing=!1}))}}};var a=r(1900),s=r(3453),c=r.n(s),d=r(461),u=r(7318),p=r(5255),f=r(7024),v=r(5386),h=r(7894),m=r(2515),y=(0,a.Z)(o,i,[],!1,null,"accbd09c",null);c()(y,{VBtn:d.Z,VCard:u.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VCol:f.Z,VContainer:v.Z,VRow:h.Z,VSpacer:m.Z}),y.options.__file="assets/js/views/stores/StoreImport.vue";const g=y.exports}}]);